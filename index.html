<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>✨ CHAT ✨</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>✨ CHAT ✨</h2>
  <div id="chat-box"></div>
  <input id="name" placeholder="Your name">
  <input id="message" placeholder="Type a message...">
  <button onclick="sendMessage()">Send</button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-database.js";

 <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCJi_zoww9atKKyXE2f1_Pbt0oq0ZIhJmM",
    authDomain: "deviascope-chat-app.firebaseapp.com",
    projectId: "deviascope-chat-app",
    storageBucket: "deviascope-chat-app.firebasestorage.app",
    messagingSenderId: "940734683100",
    appId: "1:940734683100:web:2dd84c122971c6af7e6119",
    measurementId: "G-4QXTERGCT8"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const messagesRef = ref(db, "messages");

    const chatBox = document.getElementById("chat-box");

    window.sendMessage = function () {
      const name = document.getElementById("name").value || "Anon";
      const message = document.getElementById("message").value;

      if (message.trim() !== "") {
        push(messagesRef, { name, message });
        document.getElementById("message").value = "";
      }
    };

    onChildAdded(messagesRef, (data) => {
      const msg = data.val();
      const div = document.createElement("div");
      div.className = "message";
      div.innerHTML = `<span class="user">${msg.name}:</span> <span class="text">${msg.message}</span>`;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>
</html>
